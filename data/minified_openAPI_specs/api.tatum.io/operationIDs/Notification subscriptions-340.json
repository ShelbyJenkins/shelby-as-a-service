{"metadata": {"tag": "Notification subscriptions", "tag_number": 0, "doc_number": 340, "operation_id": "createsubscription", "doc_url": "https://apidoc.tatum.io/tag/Notification subscriptions#operation/createsubscription", "server_url": "https://api.tatum.io/v3/subscription"}, "context": "path /v3/subscription\nopid createsubscription\nparams\nin query\nname testnettype\nrequired False\nschema\ndefault ethereumsepolia\ntype str\nenum\nethereumsepolia\nethereumgoerli\nsum create a subscription\ndesc 2 credits per api call  credits spent on subscriptions themselves\neach subscription type consumes a different number of credits\nfor free plans there is a monthly limit of sent webhooks which is 1000\nif the webhook is sent unsuccessfully it will be retried the number of retries depends on the plan \n\n  free plan  3 retries\n  paid plans  10 retries\n\ncreate a subscription as an http web hook\nthe following subscription types are available\n\naddresstransaction  enable http post json notifications for any blockchain transaction both incoming and outgoing at a specified address this notification applies to transactions in the native blockchain currency or with any type of blockchain tokens\n for evmbased blockchains eth this web hook is first invoked when a transaction appears in the mempool and then it is invoked again once the transaction is added to a block\n for the other blockchains this webhook is invoked when a transaction is added to a block\nfree community plans can monitor up to 10 addresses per plan\nthe following table describes the availability of this notification type on different blockchains and the credit consumption\n\n  \n    chain\n    testnet/mainnet\n    token assets support\n    plan limitation\n    credit consumption / day / address\n  \n  \n    solana\n    yes/yes\n    sol spl and nfts\n    free plans  10 addresses across all blockchains paid plans  unlimited addresses across all blockchains\n    50 credits / day / address\n  \n  \n    ethereum\n    yes sepolia goerli/yes\n    eth internal transfers erc20 erc721 erc1155\n    free plans  10 addresses across all blockchains paid plans  unlimited addresses across all blockchains\n    25 credits / day / address\n  \n  \n    polygon\n    yes/yes\n    matic erc20 erc721 erc1155\n    free plans  10 addresses across all blockchains paid plans  unlimited addresses across all blockchains\n    40 credits / day / address\n  \n  \n    celo\n    yes/yes\n    celo internal transfers erc20 erc721 erc1155\n    free plans  10 addresses across all blockchains paid plans  unlimited addresses across all blockchains\n    25 credits / day / address\n  \n  \n    klaytn\n    yes/yes\n    klay erc20 erc721 erc1155\n    free plans  10 addresses across all blockchains paid plans  unlimited addresses across all blockchains\n    25 credits / day / address\n  \n  \n    bitcoin\n    yes/yes\n    btc\n    free plans  10 addresses across all blockchains paid plans  unlimited addresses across all blockchains\n    5 credits / day / address\n  \n  \n    litecoin\n    yes/yes\n    ltc\n    free plans  10 addresses across all blockchains paid plans  unlimited addresses across all blockchains\n    7 credits / day / address\n  \n  \n    bitcoin cash\n    yes/yes\n    bch only incoming transactions\n    free plans  10 addresses across all blockchains paid plans  unlimited addresses across all blockchains\n    5 credits / day / address\n  \n  \n    dogecoin\n    yes/yes\n    doge only incoming transactions\n    free plans  10 addresses across all blockchains paid plans  unlimited addresses across all blockchains\n    7 credits / day / address\n  \n   \n    tron\n    yes/yes\n    tron trc10/trc20\n    free plans  10 addresses across all blockchains paid plans  unlimited addresses across all blockchains\n    30 credits / day / address\n  \n  \n    binance smart chain\n    yes/yes\n    bsc bep20 erc721 erc1155\n    free plans  10 addresses across all blockchains paid plans  unlimited addresses across all blockchains\n    40 credits / day / address\n  \n\nthe request body of the post request is a json object with the following structure\n\n  address fykfmwa9wnshzpjbbb9dnxsfgdgs3xzzwifgrvxfwopj // the address on which the transaction occurs for evmbased chains this is the recipients address\n  txid 2rdy3yczhswvpwtudom1d4jjy5uu9stlxf3ffxau6gtoredkfw8wegx541fvzvh6btvc5d8inapcktxfpsodbk7a // the transaction id\n  blocknumber 110827114 // the block number does not appear if the transaction is in the mempool for evmbased blockchains\n  asset 3gueer3bfvhukyjmwthownrtrkgcf1bvwiv8tbkmzbvz // the asset of the transaction for token assets this is the token address for native blochckain assets this is the name of the asset for example sol\n  amount 1 // the amount of the asset that was credited to  or debited from  the address for evmbased chains when counteraddress is present the amount is always positive\n  tokenid 1 // erc721 / erc1155 only the id of the transferred token\n  type token // the type of the transaction can be either native or token\n  mempool true // evmbased blockchains only if appears and set to true the transaction is in the mempool if set to false or does not appear at all the transaction has been added to a block\n  counteraddress undefined // an optional counter party address of the transaction for evmbased blockchains this is the recipients address\n  addressesriskratio  // optional subject to change for solana mainnet only risk levels assigned to the addresses with which the address communicated within the transaction the addresses are assessed using the aml/cft solution by blockmateio see https//docsblockmateio/docs/riskapi/sources\n    vtefahxtmvgfmepgfhzbbrrj4etup9adbmjjpzlsdmk 0\n    zbbrrj4etup9adbmjjpzlsdmkvtefahxtmvgfmepgfh 100\n  \n\n5 credits are debited for each fired web hook\ncontractnfttxsperblock  enable http post json notifications for any event of minting transferring or burning an nft that was emitted from any smart contract this notification is fired as a batch notification per block it includes all nft minting transferring or burning events from all smart contracts that got recorded into a block\nfree community plans can monitor 1 event across all blockchains per plan\nthe following table describes the availability of this notification type on different blockchains and the credit consumption\n\n  \n    chain\n    available chains the chain parameter in the response payload\n    credit consumption / day\n  \n  \n    ethereum\n    ethereumsepolia / ethereumgoerli / ethereummainnet\n    500000 credits / day\n  \n  \n    polygon\n    polygonmumbai / polygonmainnet\n    500000 credits / day\n  \n  \n    celo\n    celotestnet / celomainnet\n    500000 credits / day\n  \n  \n    klaytn\n    klaytnbaobab / klaytncypress\n    500000 credits / day\n  \n  \n    bnb smart chain\n    bsctestnet / bscmainnet\n    500000 credits / day\n  \n\nthe request body of the post request is a json object with the following structure\n\n events \n   \n     timestamp 1661961758000\n     from 0x0000000000000000000000000000000000000000\n     to 0xfa4e7035b34294407e5df1603215983d65e5a773\n     tokenid 14671\n     txid 0x916fcf878656f7a3772317697e6d2740ac8b1b7dbe6d029aa79592fd72f3fb0b\n     contractaddress 0x55a2430e32dcebc3649120f26f917d1f0686f74c\n     type erc721\n     amount 1\n     logindex 578\n     metadatauri https//graphigoprdgalaxyeco/metadata/0x55a2430e32dcebc3649120f26f917d1f0686f74c/14671json\n   \n \n blocknumber 32522207\n chain polygonmainnet\n subscriptiontype contractnfttxsperblock\n \n1 credit is debited for each fired web hook\ncontractmultitokentxsperblock  enable http post json notifications for any event of minting transferring or burning a multitoken that was emitted from any smart contract this notification is fired as a batch notification per block it includes all multi token minting transferring or burning events from all smart contracts that got recorded into a block\nfree community plans can monitor 1 event across all blockchains per plan\nthe following table describes the availability of this notification type on different blockchains and the credit consumption\n\n  \n    chain\n    available chains the chain parameter in the response payload\n    credit consumption / day\n  \n  \n    ethereum\n    ethereumsepolia / ethereumgoerli / ethereummainnet\n    500000 credits / day\n  \n  \n    polygon\n    polygonmumbai / polygonmainnet\n    500000 credits / day\n  \n  \n    celo\n    celotestnet / celomainnet\n    500000 credits / day\n  \n  \n    klaytn\n    klaytnbaobab / klaytncypress\n    500000 credits / day\n  \n  \n    bnb smart chain\n    bsctestnet / bscmainnet\n    500000 credits / day\n  \n\nthe request body of the post request is a json object with the following structure\n\n events \n   \n     timestamp 1661961758000\n     from 0x85bd970cf0e49acd572f9c2d608713bc55b5ee0e\n     to 0x9ab31230d5413e4af01af9bb697651a3c70c95c9\n     tokenid 1450000023306\n     txid 0x565b9ca6b7b5ff1b1ce0725acd785dbf5ff0930d5ff547bad044c0960291555f\n     contractaddress 0xdb6290f355a528a7284bdd528b05a78fb05226ca\n     type erc1155\n     amount 1\n     logindex 571\n     metadatauri https//touhaobjbceboscom/nft/metadata/1450000023306json\n   \n \n blocknumber 32522207\n chain polygonmainnet\n subscriptiontype contractmultitokentxsperblock\n\n1 credit is debited for each fired web hook\ncontractlogevent  enable http post json notifications for any event that was emitted from any smart contract this notification is fired as a batch notification per block it includes all events from all smart contracts that got recorded into a block\nfree community plans can monitor 1 event across all blockchains per plan\nthe following table describes the availability of this notification type on different blockchains and the credit consumption\n\n  \n    chain\n    available chains the chain parameter in the response payload\n    credit consumption / day\n  \n  \n    ethereum\n    ethereumsepolia / ethereumgoerli / ethereummainnet\n    50000 credits / day\n  \n  \n    polygon\n    polygonmumbai / polygonmainnet\n    50000 credits / day\n  \n  \n    celo\n    celotestnet / celomainnet\n    50000 credits / day\n  \n  \n    klaytn\n    klaytnbaobab / klaytncypress\n    50000 credits / day\n  \n  \n    bnb smart chain\n    bsctestnet / bscmainnet\n    50000 credits / day\n  \n\nthe request body of the post request is a json object with the following structure\n\n events \n   \n     txid 0xc98307f09ed527d5cff8305e8f65226b790e3317ded10b9e58f6f07286dcf8f1\n     logindex 326\n     timestamp 1661774265000\n     address 0xc2132d05d31c914a87c6611c10748aeb04b58e8f\n     topic0 0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\n     topic1 0x000000000000000000000000a91ab7d77892a559d2a95baaf1d748fc97c65d29\n     topic2 0x0000000000000000000000009b08288c3be4f62bbf8d1c20ac9c5e6f9467d8b7\n     topic3 null\n     data 0x0000000000000000000000000000000000000000000000000000000002c9e3e4\n   \n \n blocknumber 32447538\n chain polygonmumbai\n subscriptiontype contractlogevent\n\n1 credit is debited for each fired web hook\naccountincomingblockchaintransaction  enable http post json notifications about incoming blockchain transactions on virtual accounts\nthis web hook is invoked when an incoming transaction is reflected on the balance of the virtual account the balance is credited with the transaction amount this happens when the transaction has the sufficient number of blockchain confirmations two confirmations for btc ltc bch and doge and one confirmation for the other blockchains\nthe request body of the post request is a json object with the following structure\n\n  date 1619176527481\n  amount 0005\n  currency btc\n  subscriptiontypeaccountincomingblockchaintransaction\n  accountid 6082ab462936b4478117c6a0\n  reference c98757084ba341c9a4cd271048b41b9a // the reference of the transaction in the virtual account\n  txid 45af182a0ffab58e5ba32fee57b297b2260c6e23a1de5ddc76c7ee22d72dea99\n  blockhash 45af182a0ffab58e5ba32fee57b297b2260c6e23a1de5ddc76c7ee22d72dea99 // the hash of the block might not be present every time\n  blockheight 12345\n  from senderaddress // might not be present every time not present for utxobased blockchains\n  to recipientaddressconnectedtoledgeraccount // the blockchain address of the recipient\n  index 5 // for utxobased blockchains bch btc doge ltc this is the index of the output in the transaction\n\n1 credit is debited for each monitored account every day\naccountpendingblockchaintransaction  enable http post json notifications about incoming blockchain transactions on virtual accounts\nthis web hook is supported only for bch btc doge eth and ltc accounts\n for btcbased blockchains bch btc doge and ltc this web hook is invoked when an incoming transaction appears in a block for the first time at that time the transaction has one confirmation but this is not enough for the transaction to be reflected on the balance of the virtual account yet instead a deposit corresponding to the pending transaction with a status of in progress appears on the virtual account once the transaction is added to the block the deposits status changes to done and the account balance gets updated\n for evmbased blockchains eth this web hook is invoked when an incoming transaction appears in the mempool the virtual account balance is not updated until the transaction is added to a block instead a deposit corresponding to the pending transaction with a status of in progress appears on the virtual account once the transaction is added to the block the deposits status changes to done and the account balance gets updated\nthe request body of the post request is a json object with the following structure\n\n  date 1619176527481\n  amount 0005\n  currency btc\n  accountid 6082ab462936b4478117c6a0\n  reference c98757084ba341c9a4cd271048b41b9a // the reference of the transaction in the virtual account\n  txid 45af182a0ffab58e5ba32fee57b297b2260c6e23a1de5ddc76c7ee22d72dea99\n  blockhash 45af182a0ffab58e5ba32fee57b297b2260c6e23a1de5ddc76c7ee22d72dea99 // the hash of the block might not be present every time if set to null the transaction is in the mempool for evmbased blockchains\n  blockheight 12345 // if set to null the transaction is in the mempool for evmbased blockchains\n  from senderaddress // might not be present every time not present for utxobased blockchains bch btc doge ltc\n  to recipientaddressconnectedtoledgeraccount // the blockchain address of the recipient\n  index 5 // for utxobased blockchains bch btc doge ltc this is the index of the output in the transaction\n\n1 credit is debited for each monitored account every day\ncustomertradematch  enable http post json notifications on closed trade which occurs on any customer account\nthis web hook will be invoked when the open trade is filled and closed works also for the trade futures if is triggered by the futures bool field expiredwithoutmatch is present\nrequest body of the post request will be json object with attributes\n\n  created 1619176527481\n  amount 0005\n  price 002\n  type sell\n  pair vcchf/vcchf3\n  id 6082ab462936b4478117c6a0 // id of the trade\n  currency1accountid 6082ab462936b4478117c6a0\n  currency2accountid 6082ab512936b4478117c6a2\n  fee null\n  feeaccountid null\n  ismaker true\n  expiredwithoutmatch false\n\n10 credits will be debited for every monitored customer every day\ncustomerpartialtradematch  enable http post json notifications on partialy filled trade which occurs on any customer account\nthis web hook will be invoked when the open trade is partialy filled\nrequest body of the post request will be json object with attributes\n\n  created 1619176527481\n  amount 0005\n  orderamount 01\n  price 002\n  type sell\n  pair vcchf/vcchf3\n  id 6082ab462936b4478117c6a0 // id of the trade\n  currency1accountid 6082ab462936b4478117c6a0\n  currency2accountid 6082ab512936b4478117c6a2\n  fee null\n  feeaccountid null\n  ismaker true\n  expiredwithoutmatch false\n\n10 credits will be debited for every monitored customer every day\ntransactionintheblock  enable http post json notifications on ledger  blockchain transaction when transaction is included in the block\nthis web hook will be invoked when the outgoing transaction is included in the block\nrequest body of the post request will be json object with attributes\n\n  \n    txid 0x026f4f05b972c09279111da13dfd20d8df04eff436d7f604cd97b9ffaa690567\n    reference 902706345b074fadb17bf82899953533\n    accountid 6086ed0744c45b24d4fbd039\n    currency bsc\n    withdrawalid 608fe5b73a893234ba379ab2\n    address 0x8ce4e40889a13971681391aad29e88efaf91f784\n    amount 01\n    blockheight 8517664\n  \n10 credits will be debited every day 1 credit for every included transaction notified via web hook\nkmsfailedtx  enable http post json notifications on error during kms signature process\nthis web hook will be invoked when the tatum kms receives error during processing transactions\nrequest body of the post request will be json object with attributes\n\n  signatureid 6082ab462936b4478117c6a0\n  error error message from the kms\n\n10 credits will be debited every day\nkmscompletedtx  enable http post json notifications on successful completion of kms signature process\nthis web hook will be invoked when the tatum kms successfully completes the signature during processing transactions\nrequest body of the post request will be json object with attributes\n\n  signatureid 6082ab462936b4478117c6a0\n  txid 0x7bb7d3b90567e89f999f2e3d263bc3738a018dbbcfa9f5397678cf17cdf0235f\n\n10 credits will be debited every day\naccountbalancelimit  report with all account balances above desired limit\ntransactionhistoryreport  report with all ledger transactions for last x hours where x is set by the subscription attribute as interval\nmaximum number of transactions returned by this report is 20000 transactions are obtained from the time of the invocation of the get method to obtain report  x hours\n\nin case of unsuccesful web hook response status  other then 2xx  web hook is repeated 9 more times with exponential backoff\nparameters are t  15  279259 where 15 is interval in s backoff rate is 27925 and 9 is current number of retries last web hook is fired after 24 hours approximatelly after last failed attempt web hook is deleted from our system the 2xx response must be returned in 10 seconds after web hook is fired\nresult of the operation is subscription id which can be used to cancel subscription or obtain additional data connected to it like reports\nreqBody\noneof\ncreatesubscriptionnotification\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\naddresstransaction\nattr\ntype obj\nrequired\nchain\naddress\nurl\nprops\naddress\nmaxlength 128\nminlength 13\ntype str\nchain\ntype str\nenum\nsol\neth\nmatic\ncelo\nklay\nbtc\nltc\nbch\ndoge\ntron\nbsc\nurl\ntype str\nmaxlength 500\ncreatesubscriptionnfttransferevent\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\ncontractnfttxsperblock\nattr\ntype obj\nrequired\nchain\nurl\nprops\nchain\ntype str\nenum\neth\nmatic\ncelo\nklay\nbsc\nurl\ntype str\nmaxlength 500\ncreatesubscriptionmultitokentransferevent\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\ncontractmultitokentxsperblock\nattr\ntype obj\nrequired\nchain\nurl\nprops\nchain\ntype str\nenum\neth\nmatic\ncelo\nklay\nbsc\nurl\ntype str\nmaxlength 500\ncreatesubscriptioncontractlogevent\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\ncontractlogevent\nattr\ntype obj\nrequired\nchain\nevent\nurl\nprops\nevent\nmaxlength 66\nminlength 66\ntype str\nchain\ntype str\nenum\neth\nmatic\ncelo\nklay\nbsc\nurl\ntype str\nmaxlength 500\ncreatesubscriptionincoming\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\naccountincomingblockchaintransaction\nattr\ntype obj\nrequired\nid\nurl\nprops\nid\nmaxlength 24\nminlength 24\ntype str\nurl\ntype str\nmaxlength 500\ncreatesubscriptionpending\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\naccountpendingblockchaintransaction\nattr\ntype obj\nrequired\nid\nurl\nprops\nid\nmaxlength 24\nminlength 24\ntype str\nurl\ntype str\nmaxlength 500\ncreatesubscriptiontradematch\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\ncustomertradematch\nattr\ntype obj\nrequired\nid\nurl\nprops\nid\nmaxlength 24\nminlength 24\ntype str\nurl\ntype str\nmaxlength 500\ncreatesubscriptionpartialtradematch\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\ncustomerpartialtradematch\nattr\ntype obj\nrequired\nid\nurl\nprops\nid\nmaxlength 24\nminlength 24\ntype str\nurl\ntype str\nmaxlength 500\ncreatesubscriptionkmserror\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\nkmsfailedtx\nattr\ntype obj\nrequired\nurl\nprops\nurl\ntype str\nmaxlength 500\ncreatesubscriptionkmssuccess\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\nkmscompletedtx\nattr\ntype obj\nrequired\nurl\nprops\nurl\ntype str\nmaxlength 500\ncreatesubscriptiontxintheblock\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\ntransactionintheblock\nattr\ntype obj\nrequired\nurl\nprops\nurl\ntype str\nmaxlength 500\ncreatesubscriptionbalance\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\naccountbalancelimit\nattr\ntype obj\nrequired\nlimit\ntypeofbalance\nprops\nlimit\ntype str\npattern ddd\nmaxlength 38\ntypeofbalance\ntype str\nenum\naccount\navailable\ncreatesubscriptioninterval\ntype obj\nrequired\ntype\nattr\nprops\ntype\ntype str\nenum\ntransactionhistoryreport\nattr\ntype obj\nrequired\ninterval\nprops\ninterval\ntype num\nminimum 1\nmaximum 720\nrequired True\nresponses\n200\nid\ntype str"}